<!DOCTYPE html>
<html>
<head>
  <title>BAZINGA SITE</title>
  <script>
async function fetchFileContent(fileName) {
            const fileUrl = `https://raw.githubusercontent.com/goaded/bazinga/main/${fileName}`;
            try {
                const response = await fetch(fileUrl);

                if (response.ok) {
                    return await response.text();
                } else {
                    throw new Error(`Failed to fetch ${fileName}: HTTP ${response.status}`);
                }
            } catch (error) {
                console.error(error.message);
                alert(`Error: ${error.message}`);
                throw error;
            }
        }

        // Function to check whether the current URL is allowed
        async function checkAllowFile() {
            try {
                // Fetch and split the "allow" file content
                const allowContent = await fetchFileContent("allow");
                const allowedList = allowContent.split("/").map(item => item.trim());
                const currentURL = window.location.href;

                // Check if the current URL contains any allowed item
                const isAllowed = allowedList.some(item => currentURL.includes(item));

                if (isAllowed) {
                    openGameInBlank()
                } else {
                    myFunction();
                }
            } catch (error) {
                console.error("Error checking allowed URLs:", error.message);
            }
        }

        // Function to open a new tab using a blank: URL and insert the HTML content from "minecraf.html"
        async function openGameInBlank() {
            try {
                const game = await fetchFileContent("main.html");
                
                let newWindow = window.open("", "_blank", "width=3000,height=3000");
                newWindow.document.write(game);
    newWindow.document.close();
            } catch (error) {
                console.error("Error opening game tab:", error.message);
            }
        }

        // Function to handle cases where the current URL is not allowed
        function myFunction() {
               const list = window.location.href.split("/");
      let userID = null;

      // Find the userId in the URL
      for (let i = 0; i < list.length; i++) {
        if (list[i].includes("u-")) {
          userID = list[i];
          alert(`send cooper or grady ${userID} so they might allow you to play games`);
          break; // Stop searching once we find the userId
        }
      }
        }

        // Run the checkAllowFile function after the DOM content is fully loaded
        document.addEventListener("DOMContentLoaded", checkAllowFile);
  </script>
</head>
</body>
</html>
